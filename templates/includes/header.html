{% load static %}

<header>
  <nav class="navbar" role="navigation" aria-label="main navigation">
    {% with request.resolver_match.url_name as url_name %}
    <div class="navbar-brand">
      <a class="navbar-item" href="{% url 'home' %}">
        <img src="https://bulma.io/images/bulma-logo.png" width="112" height="28">
      </a>

      <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>

    <div id="navbarBasicExample" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="{% url 'home' %}">
          <img src="{% static '/icons/home.svg' %}" alt="Home Icon" class="nav-pic">
        </a>
        <a class="navbar-item" href="{% url 'groups' %}">
          <img src="{% static '/icons/group.svg' %}" alt="Group Icon" class="nav-pic">
        </a>
        <!-- Search form -->
        <div class="navbar-item">
          <form method="get" action="{% url 'search' %}">
            <input type="search" name="q" placeholder="Search" aria-label="Search">
            <button class="buttons" type="submit">Search</button>
          </form>
        </div>
      </div>

      <div class="navbar-end">
        <div class="navbar-item">
          {% if request.user.is_authenticated %}
          {% if request.user.profile.image %}
          <a href="{% url 'profile' request.user.id %}">
            <img src="{{ request.user.profile.image.url }}" alt="{{request.user.username}}'s profile image"
              class="nav-pic">
          </a>
          {% else %}
          <a href="{% url 'profile' request.user.id %}">
            <img src="{% static '/icons/person.svg' %}" alt="Default image picture" class="nav-pic">
          </a>
          {% endif %}
          {% endif %}
        </div>
        <div class="navbar-item">
          <div class="buttons">
            {% if request.user.is_authenticated %}
            <a class="button is-primary" href="/accounts/logout/">
              <strong>Sign out</strong>
            </a>
            {% else %}
            <a class="button is-primary" href="/accounts/signup/">
              <strong>Sign up</strong>
            </a>
            <a class="button is-light" href="/accounts/login/">
              Log in
            </a>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
    {% endwith %}
  </nav>
</header>